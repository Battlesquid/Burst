document.addEventListener("contextmenu", function (e) {
    e.preventDefault();
}, false);
var sound, sound2, sound3, sound4, sound5, sound6;
var font, mgr;
var soundArr = [];
var menuloop, menuFlag;
var back;
var cueMap = {
    0: [5.658645833333333, 15.919979166666666, 17.706645833333333, 19.354645833333333, 21.0933125, 22.810645833333332, 24.5493125, 26.26664583333333, 29.7973125, 30.17064583333333, 30.986645833333334, 31.386645833333333, 31.818645833333335, 32.68264583333333, 33.08264583333333, 33.5093125, 34.367979166666665, 34.78397916666667, 35.2373125, 35.690645833333335, 36.09064583333333, 36.538645833333334, 36.97597916666667, 37.80797916666667, 38.239979166666664, 38.65597916666667, 39.535979166666664, 39.9413125, 40.39997916666667, 41.2053125, 41.80264583333334, 43.3973125, 43.8293125, 44.20797916666667, 45.0773125, 45.5093125, 45.946645833333335, 46.82664583333333, 47.24797916666667, 47.69597916666667, 48.12797916666667, 48.52797916666667, 49.01864583333333, 49.418645833333336, 49.839979166666666, 50.266645833333335, 50.69864583333333, 51.135979166666665, 51.546645833333336, 51.99997916666667, 52.3893125, 52.815979166666665, 53.2693125, 53.7173125, 54.10664583333333, 54.50664583333333, 54.95997916666666, 57.9093125, 59.626645833333335, 61.3493125, 63.0773125, 63.5253125, 63.9093125, 64.73064583333333, 66.46397916666666, 68.18664583333333, 69.93597916666667, 70.34664583333333, 70.79464583333333, 71.66397916666666, 72.50664583333334, 73.35997916666666, 74.2133125, 75.05597916666666, 75.93597916666667, 76.76797916666666, 77.27997916666666, 77.73864583333334, 78.57597916666667, 79.37597916666667, 80.2293125, 81.1093125, 81.94664583333333, 82.79997916666666, 83.65864583333334, 84.05864583333333, 87.9413125, 90.93864583333334, 91.37064583333333, 94.36797916666667, 97.80797916666667, 99.53064583333334, 101.19464583333334, 102.92797916666666, 104.6773125, 105.0773125, 105.51464583333333, 105.93064583333333, 106.34664583333333, 106.82664583333333, 107.24797916666667, 107.6693125, 108.07997916666666, 108.52797916666667, 108.77864583333333, 109.0293125, 109.23197916666666, 109.45064583333334, 109.6853125, 109.88797916666667, 110.1173125, 111.99997916666666, 112.36797916666667, 113.2373125, 113.6693125, 114.0373125, 114.95997916666667, 115.33864583333333, 115.78664583333334, 116.6773125, 117.07197916666667, 117.5093125, 118.3573125, 118.7893125, 119.2373125, 120.09064583333334, 120.52797916666667, 120.92797916666666, 121.80797916666667, 122.25597916666666, 122.69864583333333, 123.49864583333333, 125.65864583333334, 126.09597916666667, 126.52797916666667, 126.97597916666666, 127.41864583333333, 127.8453125, 128.26664583333334, 128.52797916666665, 128.92797916666666, 129.1413125, 130.7893125, 139.33864583333335, 139.78664583333332, 141.05597916666667, 141.4773125, 142.8053125, 143.19997916666668, 144.52797916666665, 145.8293125, 146.2453125, 146.69864583333333, 147.56797916666667, 147.97864583333333, 148.44797916666667, 149.2693125, 149.69064583333332, 150.0853125, 150.9173125, 151.3493125, 153.09864583333334],
    1: null,
    2: null,
    3: [0.6613125, 1.2266458333333334, 1.8506458333333333, 2.378645833333333, 2.5439791666666665, 3.2426458333333334, 3.930645833333333, 4.5813125, 5.114645833333333, 5.3173125, 5.978645833333333, 6.687979166666667, 7.3493125, 7.850645833333333, 8.0373125, 8.687979166666667, 9.386645833333333, 10.1173125, 11.4613125, 12.858645833333334, 13.386645833333333, 13.5573125, 14.2613125, 15.567979166666667, 16.127979166666666, 16.3093125, 16.9813125, 18.33064583333333, 18.847979166666665, 19.007979166666665, 19.7013125, 21.0293125, 21.599979166666667, 21.7813125, 22.1493125, 22.3093125, 22.5013125, 25.1733125, 25.930645833333333, 26.570645833333334, 26.9013125, 27.087979166666667, 27.279979166666667, 27.450645833333333, 27.615979166666666, 27.7973125, 27.9893125, 32.0373125, 32.410645833333334, 32.666645833333334, 33.03997916666667, 33.2213125, 33.38664583333333, 34.10664583333333, 36.18664583333333, 36.82664583333333, 38.906645833333336, 39.610645833333336, 41.67997916666667, 41.85064583333333, 42.159979166666666, 42.330645833333335, 42.6613125, 42.81064583333333, 42.9973125, 43.3813125, 43.7013125, 43.8773125, 44.0693125, 44.25064583333333, 44.44797916666667, 45.050645833333334, 45.727979166666664, 46.21864583333333, 46.39997916666667, 46.730645833333334, 47.14664583333333, 47.85064583333333, 48.5013125, 49.03997916666667, 49.199979166666665, 49.5413125, 49.88797916666667, 50.5173125, 51.2053125, 51.73864583333334, 51.9413125, 52.239979166666664, 52.61864583333333, 52.8213125, 53.1893125, 53.370645833333334, 53.6693125, 53.83464583333333, 54.010645833333335, 54.3413125, 54.6773125, 55.01864583333333, 55.21064583333333, 55.407979166666664, 56.07997916666667, 57.279979166666664, 57.48797916666667, 57.78664583333333, 58.12797916666667, 58.82664583333333, 59.4773125, 60.02664583333333, 60.1973125, 60.8533125, 61.53064583333333, 62.1973125, 62.730645833333334, 62.9173125, 63.56797916666667, 63.7493125, 64.07997916666666, 64.25064583333334, 64.61864583333333, 64.77864583333333, 64.9813125, 65.32797916666667, 65.6693125, 65.85064583333333, 66.04797916666666, 66.21864583333333, 69.01864583333334, 69.3493125, 69.5413125, 69.7173125, 69.89864583333333, 70.0693125, 70.2133125, 70.3893125, 70.7893125, 70.93864583333334, 71.11997916666667, 71.30664583333333, 71.46664583333333, 74.5173125, 74.8373125, 75.00797916666667, 75.21064583333333, 75.37064583333333, 75.5573125, 75.72797916666667, 75.9093125, 76.2613125, 76.41064583333333, 76.57064583333333, 76.93864583333334, 80.07997916666666, 80.37864583333334, 80.5493125, 80.74664583333333, 80.90664583333333, 81.0773125, 81.25864583333333, 81.42397916666667, 81.7493125, 81.9093125, 82.1013125, 82.2613125, 82.42664583333334, 82.77864583333333, 83.10397916666666, 83.45064583333334, 83.77064583333333, 84.11197916666667, 84.2773125, 84.44797916666667, 84.65064583333333, 84.8213125, 84.9973125, 85.17864583333333, 85.3493125, 85.51997916666667, 85.64797916666667, 85.7973125, 85.94664583333333, 86.09597916666667, 86.25064583333334, 86.4213125, 86.5493125, 86.69864583333333, 87.45064583333334, 88.29864583333334, 88.9493125, 89.64797916666667, 90.29864583333334, 90.98664583333333, 91.3173125, 91.48797916666666, 91.69064583333333, 92.36797916666667, 92.7413125, 92.90664583333333, 93.06664583333334, 93.75997916666667, 94.4373125, 95.11997916666667, 96.49064583333333, 96.98664583333333, 97.17864583333333, 97.8773125, 98.22397916666667, 98.3893125, 98.58664583333334, 98.93864583333334, 99.29597916666667, 99.93064583333333, 100.6293125, 101.32797916666667, 102.01064583333333, 102.5013125, 102.6613125, 103.7013125, 104.04797916666666, 104.39997916666667, 104.73064583333333, 105.3973125, 106.12797916666666, 106.74664583333333, 107.46664583333333, 108.49064583333333, 108.79997916666666, 109.5413125, 109.83997916666667, 110.31997916666667, 110.89064583333334, 111.61064583333334, 111.9413125, 112.10664583333333, 112.28797916666667, 112.49064583333333, 112.66664583333333, 112.8213125, 113.00797916666667, 113.7173125, 114.31997916666667, 114.65597916666667, 114.8373125, 115.01864583333334, 115.21064583333333, 115.38664583333333, 115.5573125, 115.73864583333334, 116.4373125, 117.0293125, 117.40797916666666, 117.57864583333334, 117.75997916666667, 117.9573125, 118.12797916666666, 118.3093125, 118.50664583333334, 118.6773125, 119.7973125, 120.15997916666667, 120.50664583333334, 120.84797916666666, 121.22664583333334, 121.94664583333333, 122.5493125, 123.0773125, 123.2693125, 123.4293125, 123.61597916666666, 123.7973125, 123.97864583333333, 124.66664583333333, 125.3333125, 125.7973125, 125.96797916666667, 126.31997916666667, 126.69864583333333, 127.41864583333333, 128.03197916666667, 128.53864583333333, 128.7413125, 129.43997916666666, 129.59997916666666, 129.94664583333332, 130.1013125, 130.49064583333333, 130.66664583333332, 130.85864583333333, 131.19997916666668, 131.5573125, 131.7173125, 131.9093125, 132.09064583333333, 132.31997916666666],
    4: null,
    5: null
};
var songs = {
    0: {
        title: "Hollah!",
        artist: "Disfigure",
        difficulty: "Beginner"
    },
    1: {
        title: "Nirmiti",
        artist: "Xtrullor",
        difficulty: "Beginner"
    },
    2: {
        title: "One",
        artist: "HOVERBOOTS",
        difficulty: "Normal"
    },
    3: {
        title: "Time Leaper",
        artist: "Hinkik",
        difficulty: "Normal"
    },
    4: {
        title: "Pill",
        artist: "Heuse and Zeus X Crona (feat. Emma Sameth) ",
        difficulty: "Advanced"
    },
    5: {
        title: "Slowing Down",
        artist: "Garlagan",
        difficulty: "Advanced"
    }
};
var version = "1.0";
var menu, goArr = [],
    transition;

function preload() {
    soundFormats('mp3', 'ogg');
    sound = loadSound('assets/loop.ogg', function () {
        console.log("Ready")
    });
    sound2 = loadSound('assets/loop2.ogg', function () {
        console.log("Ready")
    });
    sound3 = loadSound('assets/loop3.ogg', function () {
        console.log("Ready")
    });
    sound4 = loadSound('assets/loop4.ogg', function () {
        console.log("Ready")
    });
    sound5 = loadSound('assets/loop5.ogg', function () {
        console.log("Ready")
    });
    sound6 = loadSound('assets/loop6.ogg', function () {
        console.log("Ready")
    });
    menuloop = loadSound('assets/menuloop.ogg', function () {
        menuFlag = true;
    });


    font = loadFont('assets/TheBoldFont.ttf');
}

function setup() {
    createCanvas(window.innerWidth, window.innerHeight);
    soundArr = soundArr = [sound, sound2, sound3, sound4, sound5, sound6];

    mgr = new SceneManager();
    mgr.sound = sound;
    mgr.sound2 = sound2;
    mgr.sound3 = sound3;
    mgr.sound4 = sound4;
    mgr.sound5 = sound5;
    mgr.sound6 = sound6;
    mgr.menuloop = menuloop;
    mgr.font = font;
    mgr.soundArr = soundArr;
    mgr.songs = songs;
    mgr.version = version;
    mgr.menuFlag = menuFlag;
    mgr.songs = songs;
    mgr.cueMap = cueMap;

    mgr.wire();

    transition = createDiv("");
    transition.addClass("transition");
    transition.position(0, 0);

    menu = createDiv('');
    menu.addClass('menu');
    menu.id("menu");
    menu.center();
    for (var i = 0; i < Object.keys(songs).length; i++) {
        console.log("Index:" + i);
        var b = createDiv(songs[i].title);
        b.addClass('title');
        b.addClass(i);
        var sub = createElement('span', songs[i].artist);
        sub.addClass('subtitle');
        sub.parent(b);
        var go = createButton(cueMap[i] == null ? "Coming Soon" : "Play");
        go.addClass('go');
        go.id(i);

        go.parent(b);
        goArr.push(go);
        console.log(goArr[i].id());


        b.parent(menu);
    }
    console.log(goArr.length);
    // for (var i = 0; i < goArr.length; i++) {
    //     console.log(i);
    //     console.log(goArr[i]);
    //     goArr[i].mouseClicked(function () {
    //         menu.hide();
    //         mgr.menuloop.stop();


    //         mgr.showScene(Spectrum, parseInt(goArr[i].id()));
    //     });
    // }

    back = createButton('Back');
    back.position(5, 5);
    back.hide();
    menu.hide();


    mgr.goArr = goArr;

    mgr.showScene(MainMenu);
}